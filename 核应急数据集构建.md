# 核应急领域大模型数据集构建分析报告

本报告旨在分析基于 `easy-dataset` 项目进行二次开发，以构建专用于**核应急 (Nuclear Emergency)** 领域的大模型微调（SFT）或预训练数据集的可行性与实施方案。

## 1. 项目背景与目标

核应急领域具有**高专业性、高安全性、流程严谨**的特点。构建该领域的大模型数据集，主要目标是训练模型具备以下能力：
*   **法规与标准知识**：熟知国内外核安全法规（如 IAEA 标准、HAF 系列法规）。
*   **应急预案响应**：在特定事故场景下（如冷却剂丧失、全厂断电），能给出符合预案的操作指导。
*   **案例分析能力**：基于历史事故（如切尔诺贝利、福岛、三里岛）进行根因分析。
*   **术语准确性**：精准理解和使用核工程专业术语。

## 2. 现有架构适配性分析

基于对 `easy-dataset` 项目源码的分析，其现有核心功能与核应急数据集构建需求的匹配度很高：

| 核心功能 | 现有能力 | 核应急领域适配性 |
| :--- | :--- | :--- |
| **多格式文档解析** | 支持 PDF, Markdown, Word (via pandoc/mammoth) | **高**。核应急资料多为 PDF 格式的标准、法规和技术手册，无需额外开发解析模块。 |
| **智能切片 (Chunking)** | 支持语义切片、固定长度切片 | **中**。法规文档通常有严格的层级结构（章、节、条、款），建议增加**基于规则的层级切片**功能，以保持法规条文的完整性。 |
| **QA 对生成 (RAG)** | 基于 LLM 生成问答对 | **高**。可定制 Prompt 来生成“情景-应对”类（Scenario-Response）数据，而不仅仅是事实问答。 |
| **数据清洗与标注** | 提供人工审核 UI，支持 AI 预评分 | **高**。核应急数据容错率低，现有的人工审核流程（Human-in-the-loop）至关重要。 |
| **模型对接** | 支持 OpenAI, Ollama 等多种后端 | **高**。考虑到数据敏感性，支持 Ollama 对接本地部署的开源模型（如 Qwen, Llama 3）处理涉密数据非常关键。 |

## 3. 核应急数据集构建策略（二次开发重点）

为了更好地服务于核应急领域，建议在以下方面对 `easy-dataset` 进行配置优化或二次开发：

### 3.1 提示词工程 (Prompt Engineering) 定制
在 `CustomPrompts` 模块中预置核应急专用提示词模板：

*   **角色设定**：
    > "你是一名拥有 20 年经验的核应急专家，熟悉《核电厂核事故应急管理条例》及相关执行程序。"
*   **生成策略 - 规程化问答**：
    > "请提取文档中的操作步骤，生成 Chain-of-Thought (CoT) 格式的问答。输入是具体的事故征兆，输出是严格按顺序执行的操作及其物理依据。"
*   **生成策略 - 判别题**：
    > "基于文档内容，生成若干个关于应急等级判定（应急待命、厂房应急、场区应急、场外应急）的场景题。"

### 3.2 数据结构扩展
建议在 `DatasetConversations` 或 `Datasets` 表中利用 `other` (JSON) 字段或新增字段来存储元数据：
*   **RiskLevel**: 风险等级 (INES 等级)。
*   **StandardRef**: 引用法规条款号 (如 HAF003 4.1.2)。
*   **EmergencyType**: 事件类型（反应堆事故、燃料运输事故、实物保护事件等）。

### 3.3 知识库源数据准备
构建高质量数据集的第一步是准备高质量语料。建议整理以下目录结构并导入系统：
```text
/knowledge-base
  ├── regulations/       # 法规标准 (HAF, HAD, GB)
  ├── procedures/        # 应急预案 (EOP - 应急运行规程, SAMG - 严重事故管理导则)
  ├── reports/           # 事故分析报告 (WANO SOER, IAEA IRS)
  └── textbooks/         # 基础理论教材 (核反应堆物理, 热工水力)
```

## 4. 实施路线图

1.  **环境准备**：
    *   使用 Docker 部署 `easy-dataset` (已完成)。
    *   配置本地 Ollama 服务，加载 `qwen2.5:7b` 或 `llama3` 作为基础生成模型（保证数据不出域）。

2.  **功能微调 (二次开发)**：
    *   **修改切片逻辑**：在解析 PDF 时，针对“条文”格式进行优化，避免将一条法规切断。
    *   **增加元数据字段**：在前端“数据集管理”页面，增加“适用堆型”（如 PWR, BWR, VVER）的标签筛选。

3.  **数据生产**：
    *   导入《国家核应急预案》等非密文档进行测试。
    *   调试 Prompt，对比 "Direct Answer" 与 "CoT" (思维链) 的生成质量。
    *   人工校验生成的 QA 对，特别是数值（如压力限值、温度限值）的准确性。

4.  **导出与训练**：
    *   使用系统导出 JSONL 格式数据。
    *   进行 SFT 微调实验，验证模型在核应急知识问答上的准确率提升。

## 5. 结论

`easy-dataset` 是构建核应急领域大模型数据集的理想基础平台。其代码结构清晰，通过少量的二次开发（主要是 Prompt 定制和数据预处理规则优化），即可满足构建高精度、高可靠性专业数据集的需求。
